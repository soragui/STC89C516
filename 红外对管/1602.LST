C51 COMPILER V8.05a   1602                                                                 06/06/2013 12:19:54 PAGE 1   


C51 COMPILER V8.05a, COMPILATION OF MODULE 1602
OBJECT MODULE PLACED IN 1602.OBJ
COMPILER INVOKED BY: D:\Keil\C51\BIN\C51.EXE 1602.c BROWSE DEBUG OBJECTEXTEND

line level    source

   1          /**************************************************************************************************/
   2          #include "reg51.h"          //包含头文件
   3          #define uchar unsigned char
   4          #define uint  unsigned int
   5          
   6          extern delay(uint time); 
   7          extern uchar dis2[16];
   8          
   9          sbit rs=P2^5;    //命令/数据选择
  10          sbit rw=P2^4;    //读写口
  11          sbit  e=P2^3;    //锁存控制
  12          
  13          uchar data  dis1[16]={"The code now is:"};     //显示两行
  14          //**************************************************************************************************
  15          //向LCD写一命令
  16          //**************************************************************************************************
  17          wcode(uchar t)
  18          {
  19   1        rs=0;           // 写的是命令
  20   1        rw=0;           // 写状态
  21   1        e=1;            //使能
  22   1        P0=t;           //写入命令 
  23   1        delay(20);      //等待写入,如果时间太短，会导致液晶无法显示
  24   1        e=0;            //数据的锁定
  25   1      }
  26          //**************************************************************************************************
  27          //向LCD写一数据
  28          //**************************************************************************************************
  29          wdata(uchar t)
  30          {
  31   1        rs=1;          // 写的是数据
  32   1        rw=0;          // 写状态
  33   1        e=1;           //使能
  34   1        P0=t;          //写入数据
  35   1        delay(20);     //等待写入,如果时间太短，会导致液晶无法显示
  36   1        e=0;           //数据的锁定
  37   1      }
  38          //************************************************************************************
  39          //功能：LCD显示
  40          //************************************************************************************
  41          show()
  42          {
  43   1        uchar i;
  44   1        wcode(0xc4); 
  45   1        for(i=0;i<12;i++)
  46   1         {
  47   2          wcode(0xc4+i); 
  48   2          wdata(dis2[i]);
  49   2         }
  50   1      }
  51          //**************************************************************************************************
  52          //LCD 初始化
  53          //**************************************************************************************************
  54          InitLCD()
  55             {  
C51 COMPILER V8.05a   1602                                                                 06/06/2013 12:19:54 PAGE 2   

  56   1        uchar i;               
  57   1        wcode(0x01);    //清屏
  58   1        wcode(0x06);   //输入方式控制,增量光标不移位
  59   1        wcode(0x0e);   //显示开关控制
  60   1        wcode(0x38);   //功能设定:设置16x2显示，5x7显示,8位数据接口    
  61   1      
  62   1        for(i=0;i<16;i++)
  63   1         {
  64   2          wcode(0x80+i); 
  65   2          wdata(dis1[i]);
  66   2         }
  67   1              
  68   1         }  


MODULE INFORMATION:   STATIC OVERLAYABLE
   CODE SIZE        =    123    ----
   CONSTANT SIZE    =   ----    ----
   XDATA SIZE       =   ----    ----
   PDATA SIZE       =   ----    ----
   DATA SIZE        =     16       2
   IDATA SIZE       =   ----    ----
   BIT SIZE         =   ----    ----
END OF MODULE INFORMATION.


C51 COMPILATION COMPLETE.  0 WARNING(S),  0 ERROR(S)
